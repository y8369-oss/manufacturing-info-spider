{% extends "base.html" %}

{% block title %}å­¦æœ¯è®ºæ–‡ - {{ site_title }}{% endblock %}

{% block extra_js %}
<script>
function searchPapers() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const items = document.querySelectorAll('.item-card');

    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
        searchInput.addEventListener('input', searchPapers);
    }
});
</script>
{% endblock %}

{% block content %}
<h2 style="margin-bottom: 1rem; color: #333;">ğŸ“š å­¦æœ¯è®ºæ–‡</h2>

<div class="search-box">
    <input type="text" id="searchInput" placeholder="æœç´¢è®ºæ–‡æ ‡é¢˜ã€ä½œè€…æˆ–å…³é”®è¯...">
</div>

{% if papers_list %}
    <p style="color: #666; margin-bottom: 1rem;">å…± {{ papers_list|length }} ç¯‡è®ºæ–‡</p>

    {% for paper in papers_list %}
    <div class="item-card">
        <h3>
            {% if paper.pdf_url %}
            <a href="{{ paper.pdf_url }}" target="_blank">{{ paper.title }}</a>
            {% else %}
            {{ paper.title }}
            {% endif %}
        </h3>
        {% if paper.title_cn %}
        <p style="color: #666; margin-top: 0.25rem; font-size: 0.95rem;">{{ paper.title_cn }}</p>
        {% endif %}
        <div class="item-meta">
            <span>âœï¸ {{ paper.authors }}</span>
            {% if paper.publish_date %}
            <span>ğŸ“… {{ paper.publish_date }}</span>
            {% endif %}
            {% if paper.arxiv_id %}
            <span>ğŸ”– arXiv: {{ paper.arxiv_id }}</span>
            {% endif %}
        </div>
        {% if paper.abstract %}
        <div class="item-description">{{ paper.abstract }}</div>
        {% endif %}
        {% if paper.abstract_cn %}
        <div class="item-description" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #eee;">
            <strong>æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰:</strong> {{ paper.abstract_cn }}
        </div>
        {% endif %}
        {% if paper.keywords %}
        <div class="keywords">
            {% for keyword in paper.keywords %}
            <span class="keyword-tag">#{{ keyword }}</span>
            {% endfor %}
        </div>
        {% endif %}
        {% if paper.pdf_url %}
        <div style="margin-top: 0.75rem;">
            <a href="{{ paper.pdf_url }}" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 500;">
                ğŸ“„ æŸ¥çœ‹PDF
            </a>
        </div>
        {% endif %}
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <p>æš‚æ— è®ºæ–‡æ•°æ®</p>
        <p style="font-size: 0.9rem; margin-top: 1rem;">ç³»ç»Ÿä¼šå®šæœŸæŠ“å–åˆ¶é€ ä¸šç›¸å…³å­¦æœ¯è®ºæ–‡ï¼Œè¯·ç¨åæŸ¥çœ‹</p>
    </div>
{% endif %}
{% endblock %}
