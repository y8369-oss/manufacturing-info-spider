{% extends "base.html" %}

{% block title %}æ–°é—»èµ„è®¯ - {{ site_title }}{% endblock %}

{% block extra_js %}
<script>
function searchNews() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const items = document.querySelectorAll('.item-card');

    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
        searchInput.addEventListener('input', searchNews);
    }
});
</script>
{% endblock %}

{% block content %}
<h2 style="margin-bottom: 1rem; color: #333;">ğŸ“° æ–°é—»èµ„è®¯</h2>

<div class="search-box">
    <input type="text" id="searchInput" placeholder="æœç´¢æ–°é—»æ ‡é¢˜ã€æ¥æºæˆ–å…³é”®è¯...">
</div>

{% if news_list %}
    <p style="color: #666; margin-bottom: 1rem;">å…± {{ news_list|length }} æ¡æ–°é—»</p>

    {% for news in news_list %}
    <div class="item-card">
        <h3><a href="{{ news.url }}" target="_blank">{{ news.title }}</a></h3>
        <div class="item-meta">
            <span>ğŸ“Œ {{ news.source }}</span>
            {% if news.publish_date %}
            <span>ğŸ“… {{ news.publish_date }}</span>
            {% endif %}
            {% if news.score %}
            <span>â­ åŒ¹é…åº¦: {{ news.score }}</span>
            {% endif %}
        </div>
        {% if news.summary %}
        <div class="item-description">{{ news.summary }}</div>
        {% endif %}
        {% if news.keywords %}
        <div class="keywords">
            {% for keyword in news.keywords %}
            <span class="keyword-tag">#{{ keyword }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <p>æš‚æ— æ–°é—»æ•°æ®</p>
        <p style="font-size: 0.9rem; margin-top: 1rem;">ç³»ç»Ÿä¼šå®šæœŸæŠ“å–åˆ¶é€ ä¸šç›¸å…³æ–°é—»ï¼Œè¯·ç¨åæŸ¥çœ‹</p>
    </div>
{% endif %}
{% endblock %}
